package org.eclipse.regexp.ui.view;

import org.eclipse.jface.action.Action;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.ui.ISharedImages;
import org.eclipse.ui.PlatformUI;
import org.eclipse.ui.forms.widgets.FormToolkit;
import org.eclipse.ui.forms.widgets.Section;

public class AddInputControl extends Action {

	private final Section inputPanel;
	private final FormToolkit toolkit;

	private int index = 0;

	public AddInputControl(final Section inputPanel, final FormToolkit toolkit) {
		super("More input", PlatformUI.getWorkbench().getSharedImages()
				.getImageDescriptor(ISharedImages.IMG_OBJ_ADD));

		this.inputPanel = inputPanel;
		this.toolkit = toolkit;

		// first input by default
		run();
	}

	@Override
	public void run() {
		InputControl inputControl = new InputControl(++index);
		inputControl.create((Composite) inputPanel.getClient(), toolkit);
		root.layout(true, true);
	}
}
